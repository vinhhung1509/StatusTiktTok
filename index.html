<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Tracker view UID</title>
  <style>
    body{font-family:Arial; padding:20px}
    table{border-collapse:collapse;width:100%}
    th,td{border:1px solid #ddd;padding:8px;text-align:left}
  </style>
</head>
<body>
  <h2>Tracker view UID</h2>
  <div>Auto-refresh dữ liệu từ repo mỗi 10s</div>
  <table id="tbl">
    <thead><tr><th>UID</th><th>Views</th><th>Last updated</th></tr></thead>
    <tbody></tbody>
  </table>

  <script>
    const DATA_URL = './data/views.json'; // đường dẫn tới file do Action cập nhật
    async function load(){
      try{
        const r = await fetch(DATA_URL + '?t=' + Date.now());
        if(!r.ok) throw new Error('Không tải được data');
        const data = await r.json();
        const tbody = document.querySelector('#tbl tbody');
        tbody.innerHTML = '';
        for(const uid of Object.keys(data)){
          const row = document.createElement('tr');
          const info = data[uid];
          row.innerHTML = `<td>${uid}</td><td>${info.views ?? '—'}</td><td>${info.updated ?? '—'}</td>`;
          tbody.appendChild(row);
        }
      }catch(e){
        console.error(e);
      }
    }
    load();
    setInterval(load, 10000); // mỗi 10s frontend refresh (lấy file JSON mới trên server)
  </script>
</body>
</html>
